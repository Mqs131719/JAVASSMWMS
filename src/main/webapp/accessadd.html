<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="lib/layui-v2.6.3/css/layui.css" media="all">
  <link rel="stylesheet" href="css/public.css" media="all">
  <style>
    body {
      background-color: #ffffff;
    }
  </style>
</head>
<body>
<div class="layui-form layuimini-form">
  <div class="layui-form-item">
    <label class="layui-form-label required">仓库名称：</label>
    <div class="layui-input-block">
      <input type="text" name="name" lay-verify="required" lay-reqtext="名称不能为空" placeholder="请输入名称" value="" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label required">状态：</label>
    <div class="layui-input-block">
      <input type="radio" name="direction" value="IN" title="入库" checked="">
      <input type="radio" name="direction" value="OUT" title="出库">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label required">商品数量：</label>
    <div class="layui-input-block">
      <input type="number" name="quantity" lay-verify="required" lay-reqtext="数量不能为空" placeholder="请输入数量" value="" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">生日：</label>
    <div class="layui-input-block">
      <input id="date1" name="birthday" placeholder="请输入生日" value="" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">学历：</label>
    <div class="layui-input-block">
      <select name="edu" lay-verify="required">
        <option value=""></option>
        <option value="博士">博士</option>
        <option value="硕士">硕士</option>
        <option value="本科">本科</option>
        <option value="专科">专科</option>
        <option value="高中">高中</option>
        <option value="初中及以下">初中及以下</option>
      </select>
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">入学：</label>
    <div class="layui-input-block">
      <input id="date2" name="sdate" placeholder="请输入入学日期" value="" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item" id="area-picker">
    <div class="layui-form-label">家乡：</div>
    <div class="layui-input-inline" style="width: 200px;">
      <select class="province-selector" lay-filter="province-1">
        <option value="">请选择省</option>
      </select>
    </div>
    <div class="layui-input-inline" style="width: 200px;">
      <select class="city-selector" lay-filter="city-1">
        <option value="">请选择市</option>
      </select>
    </div>
    <div class="layui-input-inline" style="width: 200px;">
      <select class="county-selector" lay-filter="county-1">
        <option value="">请选择区</option>
      </select>
    </div>
  </div>
  <div class="layui-form-item">
    <div class="layui-input-block">
      <button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn">新增学员</button>
    </div>
  </div>
</div>
<script src="lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
<script src="js/lay-config.js?v=1.0.4" charset="utf-8"></script>
<script>
  layui.use(['form','laydate','layarea'], function () {
    var form = layui.form,
            layer = layui.layer,
            laydate=layui.laydate,
            layarea = layui.layarea,
            $ = layui.$;
    //渲染日期框
    laydate.render({
      elem: '#date1' //指定元素
    });
    //渲染日期框
    laydate.render({
      elem: '#date2' //指定元素
    });
    //实现省市县三级联动
    var home="";
    layarea.render({
      elem: '#area-picker',
      change: function (res) {
        //选择结果
        home=res.province+res.city+res.county;
      }
    });
    //监听提交，实现数据新增
    form.on('submit(saveBtn)', function (data) {
      //请求接口  Ajax
      var d=data.field;
      d.home=home;
      $.post("/api/student/save.do",d,function (res){
        if(res.code==200){
          layer.msg("添加成功！");
          // 关闭弹出层
          var iframeIndex = parent.layer.getFrameIndex(window.name);
          parent.layer.close(iframeIndex);
        }else {
          layer.msg("亲，新增学员失败！");
        }
      })
      return false;
    });

  });
</script>
</body>
</html>